#!/usr/bin/env python
# -*- coding: utf-8 -*-

import sys
from oslo_config import cfg
from robophery.w1.ds18 import Ds18Module

common_opts = [
    cfg.Opt('name',
            short='n',
            default="ds18",
            help='Dallas DS18 family sensor name'),
    cfg.Opt('type',
            short='t',
            default="ds18b20",
            help='Specific type of Dallas DS18 family sensor'),
    cfg.Opt('id',
            short='i',
            default='0',
            help='Specific sensor address ID at 1-wire bus'),
    cfg.Opt('pin',
            short='p',
            help='GPIO pin of 1-wire bus'),
]

CONF = cfg.CONF
CONF.register_cli_opts(common_opts)
CONF(sys.argv[1:])

module = Ds18Module(CONF)
print(module.get_data)
